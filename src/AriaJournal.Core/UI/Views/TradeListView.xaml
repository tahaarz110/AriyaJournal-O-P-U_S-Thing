<!-- =============================================================================
ÙØ§ÛŒÙ„: src/AriaJournal.Core/UI/Views/TradeListView.xaml
Ø´Ù…Ø§Ø±Ù‡ ÙØ§ÛŒÙ„: 82
ØªÙˆØ¶ÛŒØ­: ØµÙØ­Ù‡ Ù„ÛŒØ³Øª Ù…Ø¹Ø§Ù…Ù„Ø§Øª
============================================================================= -->

<UserControl x:Class="AriaJournal.Core.UI.Views.TradeListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             FlowDirection="RightToLeft"
             Background="{DynamicResource BackgroundBrush}">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Ù‡Ø¯Ø± -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <TextBlock Text="ðŸ“Š Ù…Ø¹Ø§Ù…Ù„Ø§Øª"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="{DynamicResource ForegroundBrush}"/>
                <TextBlock Text="{Binding SummaryText}"
                           FontSize="13"
                           Foreground="{DynamicResource SecondaryForegroundBrush}"
                           Margin="0,5,0,0"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Content="ðŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"
                        Command="{Binding RefreshCommand}"
                        Style="{DynamicResource SecondaryButtonStyle}"
                        Margin="0,0,10,0"/>
                <Button Content="âž• Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯"
                        Command="{Binding NewTradeCommand}"
                        Style="{DynamicResource PrimaryButtonStyle}"/>
            </StackPanel>
        </Grid>

        <!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ -->
        <Border Grid.Row="1"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="8"
                Padding="15"
                Margin="0,0,0,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Ø¬Ø³ØªØ¬Ùˆ -->
                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Ø¬Ø³ØªØ¬Ùˆ" FontSize="12"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             Style="{DynamicResource TextBoxStyle}"/>
                </StackPanel>

                <!-- Ù†Ù…Ø§Ø¯ -->
                <StackPanel Grid.Column="1" Margin="0,0,10,0">
                    <TextBlock Text="Ù†Ù…Ø§Ø¯" FontSize="12"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding Symbols}"
                              SelectedItem="{Binding SelectedSymbol}"
                              Style="{DynamicResource ComboBoxStyle}"/>
                </StackPanel>

                <!-- Ø§Ø² ØªØ§Ø±ÛŒØ® -->
                <StackPanel Grid.Column="2" Margin="0,0,10,0">
                    <TextBlock Text="Ø§Ø² ØªØ§Ø±ÛŒØ®" FontSize="12"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <DatePicker SelectedDate="{Binding FromDate}"
                                Style="{DynamicResource DatePickerStyle}"/>
                </StackPanel>

                <!-- ØªØ§ ØªØ§Ø±ÛŒØ® -->
                <StackPanel Grid.Column="3" Margin="0,0,10,0">
                    <TextBlock Text="ØªØ§ ØªØ§Ø±ÛŒØ®" FontSize="12"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <DatePicker SelectedDate="{Binding ToDate}"
                                Style="{DynamicResource DatePickerStyle}"/>
                </StackPanel>

                <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
                <StackPanel Grid.Column="4" 
                            Orientation="Horizontal"
                            VerticalAlignment="Bottom">
                    <Button Content="ðŸ” ÙÛŒÙ„ØªØ±"
                            Command="{Binding ApplyFilterCommand}"
                            Style="{DynamicResource PrimaryButtonStyle}"
                            Margin="0,0,5,0"/>
                    <Button Content="Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†"
                            Command="{Binding ClearFilterCommand}"
                            Style="{DynamicResource SecondaryButtonStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Ø¬Ø¯ÙˆÙ„ Ù…Ø¹Ø§Ù…Ù„Ø§Øª -->
        <Border Grid.Row="2"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="8">
            <Grid>
                <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}">
                    <ProgressBar IsIndeterminate="True"
                                 Width="200"
                                 Height="4"/>
                    <TextBlock Text="Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ..."
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>

                <!-- Ø¬Ø¯ÙˆÙ„ -->
                <DataGrid ItemsSource="{Binding Trades}"
                          SelectedItem="{Binding SelectedTrade}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          Style="{DynamicResource DataGridStyle}"
                          Visibility="{Binding IsNotBusy, Converter={StaticResource BoolToVis}}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Ù†Ù…Ø§Ø¯" Binding="{Binding Symbol}" Width="100"/>
                        <DataGridTemplateColumn Header="Ø¬Ù‡Øª" Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding DirectionIcon}"
                                                   Foreground="{Binding DirectionColor}"/>
                                        <TextBlock Text="{Binding DirectionDisplay}"
                                                   Margin="5,0,0,0"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="Ø­Ø¬Ù…" Binding="{Binding Volume, StringFormat=N2}" Width="80"/>
                        <DataGridTextColumn Header="Ù‚ÛŒÙ…Øª ÙˆØ±ÙˆØ¯" Binding="{Binding EntryPrice, StringFormat=N5}" Width="100"/>
                        <DataGridTextColumn Header="Ù‚ÛŒÙ…Øª Ø®Ø±ÙˆØ¬" Binding="{Binding ExitPrice, StringFormat=N5}" Width="100"/>
                        <DataGridTextColumn Header="Ø²Ù…Ø§Ù† ÙˆØ±ÙˆØ¯" Binding="{Binding EntryTime, StringFormat=yyyy/MM/dd HH:mm}" Width="130"/>
                        <DataGridTemplateColumn Header="Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding ProfitLossDisplay}"
                                               Foreground="{Binding ProfitLossColor}"
                                               FontWeight="Bold"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="ÙˆØ¶Ø¹ÛŒØª" Binding="{Binding StatusDisplay}" Width="70"/>
                        <DataGridTemplateColumn Header="Ø¹Ù…Ù„ÛŒØ§Øª" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="âœï¸"
                                                Command="{Binding DataContext.EditTradeCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                CommandParameter="{Binding}"
                                                Style="{DynamicResource IconButtonStyle}"
                                                ToolTip="ÙˆÛŒØ±Ø§ÛŒØ´"/>
                                        <Button Content="ðŸ—‘ï¸"
                                                Command="{Binding DataContext.DeleteTradeCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                CommandParameter="{Binding}"
                                                Style="{DynamicResource IconButtonStyle}"
                                                ToolTip="Ø­Ø°Ù"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Ù¾ÛŒØ§Ù… Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯Ù† -->
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Visibility="{Binding IsEmpty, Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="ðŸ“­"
                               FontSize="48"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"
                               FontSize="16"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø¢Ù…Ø§Ø± -->
        <Grid Grid.Row="3" Margin="0,15,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Ø¢Ù…Ø§Ø± -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <Border Background="{DynamicResource CardBackgroundBrush}"
                        CornerRadius="5"
                        Padding="10,5"
                        Margin="0,0,10,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Ú©Ù„:" Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                        <TextBlock Text="{Binding TotalCount}"
                                   FontWeight="Bold"
                                   Margin="5,0,0,0"/>
                    </StackPanel>
                </Border>

                <Border Background="#E8F5E9"
                        CornerRadius="5"
                        Padding="10,5"
                        Margin="0,0,10,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Ø¨Ø±Ø¯:" Foreground="#2E7D32"/>
                        <TextBlock Text="{Binding WinCount}"
                                   Foreground="#2E7D32"
                                   FontWeight="Bold"
                                   Margin="5,0,0,0"/>
                    </StackPanel>
                </Border>

                <Border Background="#FFEBEE"
                        CornerRadius="5"
                        Padding="10,5"
                        Margin="0,0,10,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Ø¨Ø§Ø®Øª:" Foreground="#C62828"/>
                        <TextBlock Text="{Binding LossCount}"
                                   Foreground="#C62828"
                                   FontWeight="Bold"
                                   Margin="5,0,0,0"/>
                    </StackPanel>
                </Border>

                <Border Background="{DynamicResource CardBackgroundBrush}"
                        CornerRadius="5"
                        Padding="10,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Ù†Ø±Ø® Ø¨Ø±Ø¯:"
                                   Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                        <TextBlock Text="{Binding WinRate, StringFormat={}{0:N1}%}"
                                   FontWeight="Bold"
                                   Margin="5,0,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Content="â—€"
                        Command="{Binding PreviousPageCommand}"
                        Style="{DynamicResource SecondaryButtonStyle}"
                        Width="40"
                        IsEnabled="{Binding HasPreviousPage}"/>
                <TextBlock VerticalAlignment="Center"
                           Margin="10,0">
                    <Run Text="ØµÙØ­Ù‡"/>
                    <Run Text="{Binding CurrentPage}"/>
                    <Run Text="Ø§Ø²"/>
                    <Run Text="{Binding TotalPages}"/>
                </TextBlock>
                <Button Content="â–¶"
                        Command="{Binding NextPageCommand}"
                        Style="{DynamicResource SecondaryButtonStyle}"
                        Width="40"
                        IsEnabled="{Binding HasNextPage}"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>

<!-- =============================================================================
Ù¾Ø§ÛŒØ§Ù† ÙØ§ÛŒÙ„: src/AriaJournal.Core/UI/Views/TradeListView.xaml
============================================================================= -->