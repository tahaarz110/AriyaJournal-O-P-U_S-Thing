<!-- =============================================================================
ÙØ§ÛŒÙ„: src/AriaJournal.Core/UI/Views/LoginView.xaml
Ø´Ù…Ø§Ø±Ù‡ ÙØ§ÛŒÙ„: 78
ØªÙˆØ¶ÛŒØ­: ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ùˆ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
============================================================================= -->

<Window x:Class="AriaJournal.Core.UI.Views.LoginView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ø¢Ø±ÛŒØ§ Ú˜ÙˆØ±Ù†Ø§Ù„ - ÙˆØ±ÙˆØ¯"
        Width="550"
        Height="750"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        FlowDirection="RightToLeft"
        Background="{DynamicResource BackgroundBrush}">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Ù‡Ø¯Ø± -->
        <Border Grid.Row="0" 
                Background="{DynamicResource PrimaryBrush}"
                Padding="20">
            <StackPanel HorizontalAlignment="Center">
                <TextBlock Text="ðŸ“Š"
                           FontSize="48"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Ø¢Ø±ÛŒØ§ Ú˜ÙˆØ±Ù†Ø§Ù„"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,10,0,0"/>
                <TextBlock Text="Ú˜ÙˆØ±Ù†Ø§Ù„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ"
                           FontSize="14"
                           Foreground="#CCFFFFFF"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Ù…Ø­ØªÙˆØ§ -->
        <Border Grid.Row="1"
                Margin="30,20"
                Padding="20"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="10">
            
            <Grid>
                <!-- ========== ÙØ±Ù… ÙˆØ±ÙˆØ¯/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… ========== -->
                <StackPanel x:Name="LoginForm">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ShowRecoveryKey}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ShowRecoveryForm}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    
                    <!-- Ø¹Ù†ÙˆØ§Ù† -->
                    <TextBlock Text="{Binding SubmitButtonText}"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="{DynamicResource ForegroundBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>

                    <!-- Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ -->
                    <Border Background="#FFEBEE"
                            CornerRadius="5"
                            Padding="10"
                            Margin="0,0,0,15"
                            Visibility="{Binding HasError, Converter={StaticResource BoolToVis}}">
                        <TextBlock Text="{Binding ErrorMessage}"
                                   Foreground="#C62828"
                                   TextWrapping="Wrap"/>
                    </Border>

                    <!-- Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª -->
                    <Border Background="#E8F5E9"
                            CornerRadius="5"
                            Padding="10"
                            Margin="0,0,0,15"
                            Visibility="{Binding HasSuccess, Converter={StaticResource BoolToVis}}">
                        <TextBlock Text="{Binding SuccessMessage}"
                                   Foreground="#2E7D32"
                                   TextWrapping="Wrap"/>
                    </Border>

                    <!-- Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ -->
                    <TextBlock Text="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Style="{DynamicResource TextBoxStyle}"
                             Margin="0,0,0,15"/>

                    <!-- Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
                    <TextBlock Text="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <PasswordBox x:Name="PasswordBox"
                                 Style="{DynamicResource PasswordBoxStyle}"
                                 Margin="0,0,0,15"
                                 PasswordChanged="PasswordBox_PasswordChanged"/>

                    <!-- ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± (ÙÙ‚Ø· Ø¯Ø± Ø­Ø§Ù„Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…) -->
                    <StackPanel Visibility="{Binding IsRegisterMode, Converter={StaticResource BoolToVis}}">
                        <TextBlock Text="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <PasswordBox x:Name="ConfirmPasswordBox"
                                     Style="{DynamicResource PasswordBoxStyle}"
                                     Margin="0,0,0,15"
                                     PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>
                    </StackPanel>

                    <!-- Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø± -->
                    <CheckBox Content="Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±"
                              IsChecked="{Binding RememberMe}"
                              Foreground="{DynamicResource ForegroundBrush}"
                              Margin="0,0,0,20"
                              Visibility="{Binding IsLoginMode, Converter={StaticResource BoolToVis}}"/>

                    <!-- Ø¯Ú©Ù…Ù‡ ÙˆØ±ÙˆØ¯/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
                    <Button Content="{Binding SubmitButtonText}"
                            Command="{Binding SubmitCommand}"
                            Style="{DynamicResource PrimaryButtonStyle}"
                            Height="45"
                            FontSize="16"
                            IsEnabled="{Binding IsNotBusy}"/>

                    <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
                    <ProgressBar IsIndeterminate="True"
                                 Height="3"
                                 Margin="0,10,0,0"
                                 Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}"/>

                    <!-- Ù„ÛŒÙ†Ú© ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª -->
                    <Button Content="{Binding SwitchModeText}"
                            Command="{Binding SwitchModeCommand}"
                            Style="{DynamicResource LinkButtonStyle}"
                            Margin="0,20,0,0"
                            HorizontalAlignment="Center"/>

                    <!-- ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
                    <Button Content="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ"
                            Command="{Binding ForgotPasswordCommand}"
                            Style="{DynamicResource LinkButtonStyle}"
                            Margin="0,10,0,0"
                            HorizontalAlignment="Center"
                            Visibility="{Binding IsLoginMode, Converter={StaticResource BoolToVis}}"/>
                </StackPanel>

                <!-- ========== Ù†Ù…Ø§ÛŒØ´ Ú©Ù„ÛŒØ¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ========== -->
                <StackPanel x:Name="RecoveryKeyPanel"
                            Visibility="{Binding ShowRecoveryKey, Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="ðŸ”‘"
                               FontSize="48"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"/>
                    
                    <TextBlock Text="Ú©Ù„ÛŒØ¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ù…Ø§"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="{DynamicResource ForegroundBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,10"/>
                    
                    <TextBlock Text="Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ø±Ø§ Ø¯Ø± Ø¬Ø§ÛŒ Ø§Ù…Ù†ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯. Ø¯Ø± ØµÙˆØ±Øª ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±ØŒ ØªÙ†Ù‡Ø§ Ø±Ø§Ù‡ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø­Ø³Ø§Ø¨ Ù‡Ù…ÛŒÙ† Ú©Ù„ÛŒØ¯ Ø§Ø³Øª."
                               TextWrapping="Wrap"
                               Foreground="{DynamicResource SecondaryForegroundBrush}"
                               TextAlignment="Center"
                               Margin="0,0,0,20"/>

                    <Border Background="{DynamicResource SurfaceBrush}"
                            CornerRadius="5"
                            Padding="15"
                            Margin="0,0,0,20">
                        <TextBox Text="{Binding RecoveryKey, Mode=OneWay}"
                                 IsReadOnly="True"
                                 FontFamily="Consolas"
                                 FontSize="14"
                                 TextAlignment="Center"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 Foreground="{DynamicResource ForegroundBrush}"/>
                    </Border>

                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button Content="ðŸ“‹ Ú©Ù¾ÛŒ"
                                Command="{Binding CopyRecoveryKeyCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Margin="0,0,10,0"/>
                        
                        <Button Content="Ø§Ø¯Ø§Ù…Ù‡ Ùˆ ÙˆØ±ÙˆØ¯"
                                Command="{Binding ContinueAfterRegisterCommand}"
                                Style="{DynamicResource PrimaryButtonStyle}"/>
                    </StackPanel>
                </StackPanel>

                <!-- ========== ÙØ±Ù… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ========== -->
                <StackPanel x:Name="RecoveryForm"
                            Visibility="{Binding ShowRecoveryForm, Converter={StaticResource BoolToVis}}">
                    
                    <TextBlock Text="ðŸ”"
                               FontSize="48"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"/>
                    
                    <TextBlock Text="Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="{DynamicResource ForegroundBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>

                    <!-- Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ -->
                    <Border Background="#FFEBEE"
                            CornerRadius="5"
                            Padding="10"
                            Margin="0,0,0,15"
                            Visibility="{Binding HasError, Converter={StaticResource BoolToVis}}">
                        <TextBlock Text="{Binding ErrorMessage}"
                                   Foreground="#C62828"
                                   TextWrapping="Wrap"/>
                    </Border>

                    <!-- Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª -->
                    <Border Background="#E8F5E9"
                            CornerRadius="5"
                            Padding="10"
                            Margin="0,0,0,15"
                            Visibility="{Binding HasSuccess, Converter={StaticResource BoolToVis}}">
                        <TextBlock Text="{Binding SuccessMessage}"
                                   Foreground="#2E7D32"
                                   TextWrapping="Wrap"/>
                    </Border>

                    <!-- Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ -->
                    <TextBlock Text="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Style="{DynamicResource TextBoxStyle}"
                             Margin="0,0,0,15"/>

                    <!-- Ú©Ù„ÛŒØ¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ -->
                    <TextBlock Text="Ú©Ù„ÛŒØ¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <TextBox Text="{Binding RecoveryKeyInput, UpdateSourceTrigger=PropertyChanged}"
                             Style="{DynamicResource TextBoxStyle}"
                             FontFamily="Consolas"
                             Margin="0,0,0,15"/>

                    <!-- Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ -->
                    <TextBlock Text="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <PasswordBox x:Name="NewPasswordBox"
                                 Style="{DynamicResource PasswordBoxStyle}"
                                 Margin="0,0,0,15"
                                 PasswordChanged="NewPasswordBox_PasswordChanged"/>

                    <!-- ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ -->
                    <TextBlock Text="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯"
                               Foreground="{DynamicResource ForegroundBrush}"
                               Margin="0,0,0,5"/>
                    <PasswordBox x:Name="ConfirmNewPasswordBox"
                                 Style="{DynamicResource PasswordBoxStyle}"
                                 Margin="0,0,0,20"
                                 PasswordChanged="ConfirmNewPasswordBox_PasswordChanged"/>

                    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button Content="Ø¨Ø§Ø²Ú¯Ø´Øª"
                                Command="{Binding BackToLoginCommand}"
                                Style="{DynamicResource SecondaryButtonStyle}"
                                Margin="0,0,10,0"/>
                        
                        <Button Content="Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
                                Command="{Binding RecoverPasswordCommand}"
                                Style="{DynamicResource PrimaryButtonStyle}"
                                IsEnabled="{Binding IsNotBusy}"/>
                    </StackPanel>

                    <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
                    <ProgressBar IsIndeterminate="True"
                                 Height="3"
                                 Margin="0,10,0,0"
                                 Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ÙÙˆØªØ± -->
        <TextBlock Grid.Row="2"
                   Text="Ù†Ø³Ø®Ù‡ Û±.Û°.Û°"
                   FontSize="11"
                   Foreground="{DynamicResource SecondaryForegroundBrush}"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,15"/>
    </Grid>
</Window>

<!-- =============================================================================
Ù¾Ø§ÛŒØ§Ù† ÙØ§ÛŒÙ„
============================================================================= -->