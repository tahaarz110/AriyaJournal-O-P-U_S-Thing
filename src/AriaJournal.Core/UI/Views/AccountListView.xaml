<!-- =============================================================================
ÙØ§ÛŒÙ„: src/AriaJournal.Core/UI/Views/AccountListView.xaml
ØªÙˆØ¶ÛŒØ­: ØµÙØ­Ù‡ Ù„ÛŒØ³Øª Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ - Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡ Ø¨Ø§ Ø¯ÛŒØ§Ù„ÙˆÚ¯ Ø§ÛŒØ¬Ø§Ø¯/ÙˆÛŒØ±Ø§ÛŒØ´
============================================================================= -->

<UserControl x:Class="AriaJournal.Core.UI.Views.AccountListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:enums="clr-namespace:AriaJournal.Core.Domain.Enums"
             FlowDirection="RightToLeft"
             Background="{DynamicResource BackgroundBrush}">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Ù‡Ø¯Ø± -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="ðŸ¦ Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ"
                       FontSize="24"
                       FontWeight="Bold"
                       Foreground="{DynamicResource ForegroundBrush}"/>

            <Button Grid.Column="1"
                    Content="âž• Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÛŒØ¯"
                    Command="{Binding NewAccountCommand}"
                    Style="{DynamicResource PrimaryButtonStyle}"/>
        </Grid>

        <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ -->
        <StackPanel Grid.Row="1">
            <Border Background="#E8F5E9"
                    CornerRadius="5"
                    Padding="10"
                    Margin="0,0,0,15"
                    Visibility="{Binding HasSuccess, Converter={StaticResource BoolToVis}}">
                <TextBlock Text="{Binding SuccessMessage}"
                           Foreground="#2E7D32"/>
            </Border>

            <Border Background="#FFEBEE"
                    CornerRadius="5"
                    Padding="10"
                    Margin="0,0,0,15"
                    Visibility="{Binding HasError, Converter={StaticResource BoolToVis}}">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#C62828"/>
            </Border>
        </StackPanel>

        <!-- Ù„ÛŒØ³Øª Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding Accounts}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{DynamicResource CardBackgroundBrush}"
                                CornerRadius="10"
                                Padding="20"
                                Margin="0,0,0,15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                        <TextBlock Text="{Binding Name}"
                                                   FontSize="18"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource ForegroundBrush}"/>
                                        <Border Background="{DynamicResource PrimaryBrush}"
                                                CornerRadius="3"
                                                Padding="8,2"
                                                Margin="10,0,0,0"
                                                Visibility="{Binding IsDefault, Converter={StaticResource BoolToVis}}">
                                            <TextBlock Text="Ù¾ÛŒØ´â€ŒÙØ±Ø¶"
                                                       Foreground="White"
                                                       FontSize="11"/>
                                        </Border>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <TextBlock Text="{Binding BrokerName}"
                                                   Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                        <TextBlock Text=" | "
                                                   Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                        <TextBlock Text="{Binding Type}"
                                                   Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                        <StackPanel Margin="0,0,30,0">
                                            <TextBlock Text="Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§ÙˆÙ„ÛŒÙ‡"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                            <TextBlock FontSize="16"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource ForegroundBrush}">
                                                <Run Text="{Binding InitialBalance, StringFormat=N2}"/>
                                                <Run Text="{Binding Currency}"/>
                                            </TextBlock>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,30,0">
                                            <TextBlock Text="Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                            <TextBlock FontSize="16"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource ForegroundBrush}">
                                                <Run Text="{Binding CurrentBalance, StringFormat=N2}"/>
                                                <Run Text="{Binding Currency}"/>
                                            </TextBlock>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,30,0">
                                            <TextBlock Text="ØªØ¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                            <TextBlock Text="{Binding TradesCount}"
                                                       FontSize="16"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource ForegroundBrush}"/>
                                        </StackPanel>

                                        <StackPanel>
                                            <TextBlock Text="Ù†Ø±Ø® Ø¨Ø±Ø¯"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource SecondaryForegroundBrush}"/>
                                            <TextBlock Text="{Binding WinRate, StringFormat={}{0:N1}%}"
                                                       FontSize="16"
                                                       FontWeight="Bold"
                                                       Foreground="{DynamicResource ForegroundBrush}"/>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Grid.Column="1"
                                            Orientation="Horizontal"
                                            VerticalAlignment="Top">
                                    <Button Content="âœï¸"
                                            Command="{Binding DataContext.EditAccountCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"
                                            Style="{DynamicResource IconButtonStyle}"
                                            ToolTip="ÙˆÛŒØ±Ø§ÛŒØ´"
                                            Margin="0,0,5,0"/>
                                    <Button Content="â­"
                                            Command="{Binding DataContext.SetDefaultCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"
                                            Style="{DynamicResource IconButtonStyle}"
                                            ToolTip="ØªÙ†Ø¸ÛŒÙ… Ù¾ÛŒØ´â€ŒÙØ±Ø¶"
                                            Margin="0,0,5,0"/>
                                    <Button Content="ðŸ—‘ï¸"
                                            Command="{Binding DataContext.DeleteAccountCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"
                                            Style="{DynamicResource IconButtonStyle}"
                                            ToolTip="Ø­Ø°Ù"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Ù¾ÛŒØ§Ù… Ø®Ø§Ù„ÛŒ -->
        <StackPanel Grid.Row="2"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Visibility="{Binding IsEmpty, Converter={StaticResource BoolToVis}}">
            <TextBlock Text="ðŸ¦"
                       FontSize="64"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Ù‡Ù†ÙˆØ² Ø­Ø³Ø§Ø¨ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª"
                       FontSize="18"
                       Foreground="{DynamicResource SecondaryForegroundBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,15,0,0"/>
            <Button Content="Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø­Ø³Ø§Ø¨"
                    Command="{Binding NewAccountCommand}"
                    Style="{DynamicResource PrimaryButtonStyle}"
                    Margin="0,20,0,0"/>
        </StackPanel>

        <!-- Ø¯ÛŒØ§Ù„ÙˆÚ¯ Ø§ÛŒØ¬Ø§Ø¯/ÙˆÛŒØ±Ø§ÛŒØ´ Ø­Ø³Ø§Ø¨ -->
        <Border Grid.RowSpan="3"
                Background="#80000000"
                Visibility="{Binding IsDialogOpen, Converter={StaticResource BoolToVis}}">
            <Border Background="{DynamicResource CardBackgroundBrush}"
                    CornerRadius="10"
                    Padding="30"
                    Width="500"
                    MaxHeight="600"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="{Binding DialogTitle}"
                                   FontSize="20"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,20"/>

                        <!-- Ù†Ø§Ù… Ø­Ø³Ø§Ø¨ -->
                        <TextBlock Text="Ù†Ø§Ù… Ø­Ø³Ø§Ø¨ *"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <TextBox Text="{Binding EditingAccount.Name, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource TextBoxStyle}"
                                 Margin="0,0,0,15"/>

                        <!-- Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨ -->
                        <TextBlock Text="Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <ComboBox SelectedValue="{Binding EditingAccount.Type}"
                                  Style="{DynamicResource ComboBoxStyle}"
                                  Margin="0,0,0,15">
                            <ComboBoxItem Content="Ø¯Ù…Ùˆ (Demo)" Tag="{x:Static enums:AccountType.Demo}"/>
                            <ComboBoxItem Content="Ø±ÛŒÙ„ (Real)" Tag="{x:Static enums:AccountType.Real}"/>
                            <ComboBoxItem Content="Ù¾Ø±Ø§Ù¾ (Prop)" Tag="{x:Static enums:AccountType.Prop}"/>
                            <ComboBoxItem Content="Ú†Ø§Ù„Ø´ (Challenge)" Tag="{x:Static enums:AccountType.Challenge}"/>
                        </ComboBox>

                        <!-- Ø¨Ø±ÙˆÚ©Ø± -->
                        <TextBlock Text="Ù†Ø§Ù… Ø¨Ø±ÙˆÚ©Ø± *"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <TextBox Text="{Binding EditingAccount.BrokerName, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource TextBoxStyle}"
                                 Margin="0,0,0,15"/>

                        <!-- Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨ -->
                        <TextBlock Text="Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <TextBox Text="{Binding EditingAccount.AccountNumber, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource TextBoxStyle}"
                                 Margin="0,0,0,15"/>

                        <!-- Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ùˆ Ø§Ø±Ø² -->
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§ÙˆÙ„ÛŒÙ‡"
                                           Foreground="{DynamicResource ForegroundBrush}"
                                           Margin="0,0,0,5"/>
                                <TextBox Text="{Binding EditingAccount.InitialBalance, UpdateSourceTrigger=PropertyChanged}"
                                         Style="{DynamicResource TextBoxStyle}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Ø§Ø±Ø²"
                                           Foreground="{DynamicResource ForegroundBrush}"
                                           Margin="0,0,0,5"/>
                                <ComboBox Text="{Binding EditingAccount.Currency}"
                                          IsEditable="True"
                                          Style="{DynamicResource ComboBoxStyle}">
                                    <ComboBoxItem Content="USD"/>
                                    <ComboBoxItem Content="EUR"/>
                                    <ComboBoxItem Content="GBP"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>

                        <!-- Ù„ÙˆØ±ÛŒØ¬ -->
                        <TextBlock Text="Ù„ÙˆØ±ÛŒØ¬"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <ComboBox Text="{Binding EditingAccount.Leverage}"
                                  IsEditable="True"
                                  Style="{DynamicResource ComboBoxStyle}"
                                  Margin="0,0,0,15">
                            <ComboBoxItem Content="1:10"/>
                            <ComboBoxItem Content="1:50"/>
                            <ComboBoxItem Content="1:100"/>
                            <ComboBoxItem Content="1:200"/>
                            <ComboBoxItem Content="1:500"/>
                        </ComboBox>

                        <!-- ØªÙˆØ¶ÛŒØ­Ø§Øª -->
                        <TextBlock Text="ØªÙˆØ¶ÛŒØ­Ø§Øª"
                                   Foreground="{DynamicResource ForegroundBrush}"
                                   Margin="0,0,0,5"/>
                        <TextBox Text="{Binding EditingAccount.Description, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{DynamicResource TextBoxStyle}"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 Height="60"
                                 Margin="0,0,0,15"/>

                        <!-- Ø­Ø³Ø§Ø¨ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ -->
                        <CheckBox Content="Ø§ÛŒÙ† Ø­Ø³Ø§Ø¨ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø§Ø´Ø¯"
                                  IsChecked="{Binding EditingAccount.IsDefault}"
                                  Foreground="{DynamicResource ForegroundBrush}"
                                  Margin="0,0,0,20"/>

                        <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Left">
                            <Button Content="Ø°Ø®ÛŒØ±Ù‡"
                                    Command="{Binding SaveAccountCommand}"
                                    Style="{DynamicResource PrimaryButtonStyle}"
                                    Width="120"
                                    Margin="0,0,10,0"/>
                            <Button Content="Ø§Ù†ØµØ±Ø§Ù"
                                    Command="{Binding CancelDialogCommand}"
                                    Style="{DynamicResource SecondaryButtonStyle}"
                                    Width="120"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Border>

        <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
        <Border Grid.RowSpan="3"
                Background="#80000000"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True"
                             Width="200"
                             Height="4"/>
                <TextBlock Text="Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´..."
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,15,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>

<!-- =============================================================================
Ù¾Ø§ÛŒØ§Ù† ÙØ§ÛŒÙ„
============================================================================= -->